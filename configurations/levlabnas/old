sysctl kern.geom.debugflags=16
xzcat /mnt/tank/home/abergman/FreeNAS-8.0.1-RC1-amd64-Full_Install.xz | dd of=/dev/ada0 bs=64k
init 6
6-32 x 5mm flat head screws for the hard drive
Product #9724 $2.67/box of 100
**head of screw too big. Arrangement: 
+--A---A---A
+
+
+--A---B---B
A: new screws
B: old screw in cartridge

./MegaCli64 -AdpAllinfo -aAll | less
./MegaCli64 -LDinfo -Lall -aAll|less
./MegaCli64 -LDPDInfo -a0
MegaCli64 -PDlist -a0|less
./MegaCli64 -PDPrpRmv -PhysDrv [24:4] -a0
http://kb.lsi.com/Print16511.aspx
Be sure to disable 'Maintain PD Fail History' when using single drive RAID 0.  Failure to do so may result in the single drive RAID 0 array being deleted with an unclean shutdown, as the controller will mark the single drive RAID 0 'unconfigured bad'.  If the setting is disabled the drives would be marked foreign configuration and the auto import policy would pull them drive back in.
./MegaCli64 -adpsetprop MaintainPdFailHistoryEnbl 0 -a0
MegaCli64 -AdpAllinfo -a0 | grep -i 'Maintain'

http://hwraid.le-vert.net/wiki/LSIMegaRAIDSAS
megacli -AdpBbuCmd -GetBbuStatus -a0 | grep -e '^isSOHGood' -e '^Charger Status' -e '^Remaining Capacity'
megacli -LDSetProp WB -LALL -aALL
megacli -LDSetProp NoCachedBadBBU -LALL -aALL
megacli -LDInfo -LAll -aAll
Write-Back. When using write-back caching, the controller sends a write-request completion signal as soon as the data is in the controller cache but has not yet been written to disk. Write-back caching may provide improved performance since subsequent read requests can more quickly retrieve data from the controller cache than they could from the disk. Write-back caching also entails a data security risk, however, since a system failure could prevent the data from being written to disk even though the controller has sent a write-request completion signal. In this case, data may be lost. Other applications may also experience problems when taking actions that assume the data is available on the disk. 
megacli -CfgDsply -a0

./MegaCli64 -PDReplaceMissing -PhysDrv \[24:0\]

./MegaCli -CfgForeign -Clear -a0
./MegaCli -CfgEachDskRaid0 WT NORA Direct NoCachedBadBBU -a0

./MegaCli64 -AdpSetProp -EnableJBOD 1 -a0
./MegaCli64 -AdpGetProp -EnableJBOD -a0
./MegaCli64 -DirectPDMapping -Enbl -a0

mfiutil show adapter
mfiutil show volumes
mfiutil show events -c info

mfiutil show drives
mfiutil create jbod -v e1:s4
zpool add tank spare /dev/mfid16
zpool status
mfiutil good e1:s4
mfiutil drive clear e1:s4 start
do not try to stop, let it run for a few hours (attempting stop will crash the system)
mfiutil drive clear e1:s4 stop



Ignore zfs snapshots diskspace usage
mount -uw /
/usr/local/etc/collectd.conf
/conf/base/etc/rc.d/ix-collectd
<Plugin "df">
    Mountpoint "/"
    Mountpoint "/dev"
    Mountpoint "/etc"
    Mountpoint "/var"
    Mountpoint "/mnt"
    Mountpoint "/data"
    Mountpoint "/.*/\.zfs/snapshot/"
    IgnoreSelected true
</Plugin>
mount -ur /
service collectd stop
rm -f /var/db/collectd/rrd/localhost/df/*
service collectd start


sysctl vfs.zfs
vfs.zfs.vdev.min_pending: 4
vfs.zfs.vdev.max_pending: 10
vfs.zfs.txg.synctime: 5
vfs.zfs.txg.timeout: 30

zfs list -H -o name -t snapshot | xargs -n1 zfs destroy

prints location of attached flash drive
camcontrol devlist


abergman:*:1001:1001:Adriel :/mnt/tank/home/abergman:/usr/local/bin/bash
blin:*:1002:1001:Ben Lin:/mnt/tank/home/blin:/usr/local/bin/bash
dellison:*:1003:1001:David Ellison:/mnt/tank/home/dellison:/usr/local/bin/bash
pconlon:*:1004:1001:Patrick Conlon:/mnt/tank/home/pconlon:/usr/local/bin/bash
alev:*:1005:1001:Andre Levchenko:/mnt/tank/home/alev:/usr/local/bin/bash

service routing restart

ee /etc/local/lighttpd/lighttpd.conf
server.bind = "10.255.255.2"
service lighttpd restart
/etc/local/rc.d/lighttpd stop
/etc/local/rc.d/lighttpd start
mount -uw /
ee /conf/base/etc/local/lighttpd/lighttpd.conf
mount -ur /

